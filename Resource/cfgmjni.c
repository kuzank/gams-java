/*  Java Native Interrface code generated by apiwrapper for GAMS Version 30.1.0
 *
 * GAMS - Loading mechanism for GAMS Expert-Level APIs
 *
 * Copyright (c) 2016-2020 GAMS Software GmbH <support@gams.com>
 * Copyright (c) 2016-2020 GAMS Development Corp. <support@gams.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

#include <jni.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
/* #include <locale.h> */
#include <cfgmcc.h>

/* at least for some JNI implementations, JNIEXPORT is not setup to
 * explicitly set visibility to default when using GNU compilers;
 * thus, we do this globally for all functions via this pragma
 *  (which is nicer than redefining JNIEXPORT)
 */
#ifdef __GNUC__
#pragma GCC visibility push(default)
#endif

typedef union foo { void *p; jlong i; } u64_t;

typedef char string255[256];

static JavaVM *Cached_JVM = NULL;
JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM *vm, void *reserved)
{
    Cached_JVM = vm;
    cfgInitMutexes();
    return JNI_VERSION_1_2;
}

JNIEXPORT void JNICALL JNI_OnUnload(JavaVM *vm, void *reserved)
{
    cfgFiniMutexes();
}

/* Prototypes */
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_GetReady(JNIEnv *env, jobject obj, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_GetReadyD(JNIEnv *env, jobject obj, jstring dirName, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_GetReadyL(JNIEnv *env, jobject obj, jstring libName, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_Create(JNIEnv *env, jobject obj, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_CreateD(JNIEnv *env, jobject obj, jstring dirName, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_CreateL(JNIEnv *env, jobject obj, jstring libName, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_Free(JNIEnv *env, jobject obj);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_ReadConfig(JNIEnv *env, jobject obj, jstring filename);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_NumAlgs(JNIEnv *env, jobject obj);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_DefaultAlg(JNIEnv *env, jobject obj, jint proc);
JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_AlgName(JNIEnv *env, jobject obj, jint alg, jobjectArray sst_result);
JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_AlgCode(JNIEnv *env, jobject obj, jint alg, jobjectArray sst_result);
JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgHidden(JNIEnv *env, jobject obj, jint alg);
JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgAllowsModifyProblem(JNIEnv *env, jobject obj, jint alg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgLibInfo(JNIEnv *env, jobject obj, jint alg, jobjectArray name, jobjectArray prefix);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgThreadSafeIndic(JNIEnv *env, jobject obj, jint alg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgNumber(JNIEnv *env, jobject obj, jstring id);
JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgCapability(JNIEnv *env, jobject obj, jint alg, jint proc);
JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgCreate(JNIEnv *env, jobject obj, jint alg, jlongArray psl, jstring sysDir, jobjectArray msg);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgReadyAPI(JNIEnv *env, jobject obj, jint alg, jlong psl, jlong gmo, jlong opt);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgModifyProblem(JNIEnv *env, jobject obj, jint alg, jlong psl);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgCallSolver(JNIEnv *env, jobject obj, jint alg, jlong psl, jlong gmo);
JNIEXPORT void JNICALL Java_com_gams_api_cfgm_AlgFree(JNIEnv *env, jobject obj, jint alg, jlongArray vpsl);
JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_DefFileName(JNIEnv *env, jobject obj, jstring id, jobjectArray defFileName);
JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_ModelTypeName(JNIEnv *env, jobject obj, jint proc, jobjectArray sst_result);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_ModelTypeNumber(JNIEnv *env, jobject obj, jstring id);
JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_NumMsg(JNIEnv *env, jobject obj);
JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_GetMsg(JNIEnv *env, jobject obj, jobjectArray sst_result);

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_GetReady(JNIEnv *env, jobject obj, jobjectArray msg)
{
   int rc_GetReady;
   jstring local_msg;
   char buffer_msg[256];
   rc_GetReady = cfgGetReady(buffer_msg, sizeof(buffer_msg));
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   return rc_GetReady;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_GetReadyD(JNIEnv *env, jobject obj, jstring dirName, jobjectArray msg)
{
   int rc_GetReadyD;
   char *local_dirName;
   jstring local_msg;
   char buffer_msg[256];
   buffer_msg[0] = '\0';
   local_dirName = (char *) (*env)->GetStringUTFChars(env, dirName, NULL);
   rc_GetReadyD = cfgGetReadyD(local_dirName, buffer_msg, sizeof(buffer_msg));
   (*env)->ReleaseStringUTFChars(env, dirName, local_dirName);
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   return rc_GetReadyD;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_GetReadyL(JNIEnv *env, jobject obj, jstring libName, jobjectArray msg)
{
   int rc_GetReadyL;
   char *local_libName;
   jstring local_msg;
   char buffer_msg[256];
   buffer_msg[0] = '\0';
   local_libName = (char *) (*env)->GetStringUTFChars(env, libName, NULL);
   rc_GetReadyL = cfgGetReadyL(local_libName, buffer_msg, sizeof(buffer_msg));
   (*env)->ReleaseStringUTFChars(env, libName, local_libName);
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   return rc_GetReadyL;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_Create(JNIEnv *env, jobject obj, jobjectArray msg)
{
   int rc_Create;
   jfieldID fid;
   u64_t pcfg;
   jstring local_msg;
   char buffer_msg[256];
   jclass cls = (*env)->GetObjectClass(env, obj);
   buffer_msg[0] = '\0';
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_Create = cfgCreate((cfgHandle_t *)&pcfg.p, buffer_msg, sizeof(buffer_msg));
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   (*env)->SetLongField(env, obj, fid, pcfg.i);
   return rc_Create;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_CreateD(JNIEnv *env, jobject obj, jstring dirName, jobjectArray msg)
{
   int rc_CreateD;
   jfieldID fid;
   u64_t pcfg;
   char *local_dirName;
   jstring local_msg;
   char buffer_msg[256];
   jclass cls = (*env)->GetObjectClass(env, obj);
   buffer_msg[0] = '\0';
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_dirName = (char *) (*env)->GetStringUTFChars(env, dirName, NULL);
   rc_CreateD = cfgCreateD((cfgHandle_t *)&pcfg.p, local_dirName, buffer_msg, sizeof(buffer_msg));
   (*env)->ReleaseStringUTFChars(env, dirName, local_dirName);
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   (*env)->SetLongField(env, obj, fid, pcfg.i);
   return rc_CreateD;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_CreateL(JNIEnv *env, jobject obj, jstring libName, jobjectArray msg)
{
   int rc_CreateL;
   jfieldID fid;
   u64_t pcfg;
   char *local_libName;
   jstring local_msg;
   char buffer_msg[256];
   jclass cls = (*env)->GetObjectClass(env, obj);
   buffer_msg[0] = '\0';
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_libName = (char *) (*env)->GetStringUTFChars(env, libName, NULL);
   rc_CreateL = cfgCreateL((cfgHandle_t *)&pcfg.p, local_libName, buffer_msg, sizeof(buffer_msg));
   (*env)->ReleaseStringUTFChars(env, libName, local_libName);
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   (*env)->SetLongField(env, obj, fid, pcfg.i);
   return rc_CreateL;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_Free(JNIEnv *env, jobject obj)
{
   int rc_Free;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_Free = cfgFree((cfgHandle_t *)&pcfg.p);
   (*env)->SetLongField(env, obj, fid, pcfg.i);
   return rc_Free;
}


JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_ReadConfig(JNIEnv *env, jobject obj, jstring filename)
{
   int rc_cfgReadConfig;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   char *local_filename;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_filename = (char *)(*env)->GetStringUTFChars(env, filename, NULL);
   rc_cfgReadConfig = cfgReadConfig((cfgHandle_t)pcfg.p, local_filename);
   (*env)->ReleaseStringUTFChars(env, filename, local_filename);
   return rc_cfgReadConfig;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_NumAlgs(JNIEnv *env, jobject obj)
{
   int rc_cfgNumAlgs;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgNumAlgs = cfgNumAlgs((cfgHandle_t)pcfg.p);
   return rc_cfgNumAlgs;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_DefaultAlg(JNIEnv *env, jobject obj, jint proc)
{
   int rc_cfgDefaultAlg;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgDefaultAlg = cfgDefaultAlg((cfgHandle_t)pcfg.p, proc);
   return rc_cfgDefaultAlg;
}

JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_AlgName(JNIEnv *env, jobject obj, jint alg, jobjectArray sst_result)
{
   char *rc_cfgAlgName;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jstring local_sst;
   char buffer_sst[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return NULL;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   buffer_sst[0] = '\0';
   rc_cfgAlgName = cfgAlgName((cfgHandle_t)pcfg.p, alg, buffer_sst);
   local_sst = (*env)->NewStringUTF(env, buffer_sst);
   (*env)->SetObjectArrayElement(env, sst_result, 0, local_sst);
   return (*env)->NewStringUTF(env, rc_cfgAlgName);
}

JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_AlgCode(JNIEnv *env, jobject obj, jint alg, jobjectArray sst_result)
{
   char *rc_cfgAlgCode;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jstring local_sst;
   char buffer_sst[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return NULL;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   buffer_sst[0] = '\0';
   rc_cfgAlgCode = cfgAlgCode((cfgHandle_t)pcfg.p, alg, buffer_sst);
   local_sst = (*env)->NewStringUTF(env, buffer_sst);
   (*env)->SetObjectArrayElement(env, sst_result, 0, local_sst);
   return (*env)->NewStringUTF(env, rc_cfgAlgCode);
}

JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgHidden(JNIEnv *env, jobject obj, jint alg)
{
   int rc_cfgAlgHidden;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgAlgHidden = cfgAlgHidden((cfgHandle_t)pcfg.p, alg);
   return rc_cfgAlgHidden;
}

JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgAllowsModifyProblem(JNIEnv *env, jobject obj, jint alg)
{
   int rc_cfgAlgAllowsModifyProblem;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgAlgAllowsModifyProblem = cfgAlgAllowsModifyProblem((cfgHandle_t)pcfg.p, alg);
   return rc_cfgAlgAllowsModifyProblem;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgLibInfo(JNIEnv *env, jobject obj, jint alg, jobjectArray name, jobjectArray prefix)
{
   int rc_cfgAlgLibInfo;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jstring local_name;
   char buffer_name[256];
   jstring local_prefix;
   char buffer_prefix[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   buffer_name[0] = '\0';
   buffer_prefix[0] = '\0';
   rc_cfgAlgLibInfo = cfgAlgLibInfo((cfgHandle_t)pcfg.p, alg, buffer_name, buffer_prefix);
   local_name = (*env)->NewStringUTF(env, buffer_name);
   (*env)->SetObjectArrayElement(env, name, 0, local_name);
   local_prefix = (*env)->NewStringUTF(env, buffer_prefix);
   (*env)->SetObjectArrayElement(env, prefix, 0, local_prefix);
   return rc_cfgAlgLibInfo;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgThreadSafeIndic(JNIEnv *env, jobject obj, jint alg)
{
   int rc_cfgAlgThreadSafeIndic;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgAlgThreadSafeIndic = cfgAlgThreadSafeIndic((cfgHandle_t)pcfg.p, alg);
   return rc_cfgAlgThreadSafeIndic;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgNumber(JNIEnv *env, jobject obj, jstring id)
{
   int rc_cfgAlgNumber;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   char *local_id;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_id = (char *)(*env)->GetStringUTFChars(env, id, NULL);
   rc_cfgAlgNumber = cfgAlgNumber((cfgHandle_t)pcfg.p, local_id);
   (*env)->ReleaseStringUTFChars(env, id, local_id);
   return rc_cfgAlgNumber;
}

JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgCapability(JNIEnv *env, jobject obj, jint alg, jint proc)
{
   int rc_cfgAlgCapability;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgAlgCapability = cfgAlgCapability((cfgHandle_t)pcfg.p, alg, proc);
   return rc_cfgAlgCapability;
}

JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_AlgCreate(JNIEnv *env, jobject obj, jint alg, jlongArray psl, jstring sysDir, jobjectArray msg)
{
   int rc_cfgAlgCreate;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jlong* local_psl;
   void** localCopy_psl;
   char *local_sysDir;
   jstring local_msg;
   char buffer_msg[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_psl = (*env)->GetLongArrayElements(env, psl, NULL);
   if( sizeof(jlong) != sizeof(void*) ) {
     jsize localCount;
     u64_t blab;
     localCopy_psl = (void**)malloc(sizeof(void*) * (*env)->GetArrayLength(env, psl));
     for( localCount = 0; localCount < (*env)->GetArrayLength(env, psl); ++localCount ) {
       blab.i = local_psl[localCount];
       localCopy_psl[localCount] = blab.p;
       }
   } else
     localCopy_psl = (void**)local_psl;
   local_sysDir = (char *)(*env)->GetStringUTFChars(env, sysDir, NULL);
   buffer_msg[0] = '\0';
   rc_cfgAlgCreate = cfgAlgCreate((cfgHandle_t)pcfg.p, alg, localCopy_psl, local_sysDir, buffer_msg);
   (*env)->ReleaseLongArrayElements(env, psl, local_psl, 0);
   if( sizeof(jlong) != sizeof(void*) ) {
     jsize localCount;
     u64_t blub;
     for( localCount = 0; localCount < (*env)->GetArrayLength(env, psl); ++localCount ) {
       blub.i = 0; blub.p = localCopy_psl[localCount];
       (*env)->SetLongArrayRegion(env, psl, localCount, 1, &blub.i);
     }
     free(localCopy_psl);
   }
   (*env)->ReleaseStringUTFChars(env, sysDir, local_sysDir);
   local_msg = (*env)->NewStringUTF(env, buffer_msg);
   (*env)->SetObjectArrayElement(env, msg, 0, local_msg);
   return rc_cfgAlgCreate;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgReadyAPI(JNIEnv *env, jobject obj, jint alg, jlong psl, jlong gmo, jlong opt)
{
   int rc_cfgAlgReadyAPI;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   u64_t local_psl;
   u64_t local_gmo;
   u64_t local_opt;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_psl.i = psl;
   local_gmo.i = gmo;
   local_opt.i = opt;
   rc_cfgAlgReadyAPI = cfgAlgReadyAPI((cfgHandle_t)pcfg.p, alg, local_psl.p, local_gmo.p, local_opt.p);
   return rc_cfgAlgReadyAPI;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgModifyProblem(JNIEnv *env, jobject obj, jint alg, jlong psl)
{
   int rc_cfgAlgModifyProblem;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   u64_t local_psl;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_psl.i = psl;
   rc_cfgAlgModifyProblem = cfgAlgModifyProblem((cfgHandle_t)pcfg.p, alg, local_psl.p);
   return rc_cfgAlgModifyProblem;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_AlgCallSolver(JNIEnv *env, jobject obj, jint alg, jlong psl, jlong gmo)
{
   int rc_cfgAlgCallSolver;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   u64_t local_psl;
   u64_t local_gmo;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_psl.i = psl;
   local_gmo.i = gmo;
   rc_cfgAlgCallSolver = cfgAlgCallSolver((cfgHandle_t)pcfg.p, alg, local_psl.p, local_gmo.p);
   return rc_cfgAlgCallSolver;
}

JNIEXPORT void JNICALL Java_com_gams_api_cfgm_AlgFree(JNIEnv *env, jobject obj, jint alg, jlongArray vpsl)
{
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jlong* local_vpsl;
   void** localCopy_vpsl;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return ;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_vpsl = (*env)->GetLongArrayElements(env, vpsl, NULL);
   if( sizeof(jlong) != sizeof(void*) ) {
     jsize localCount;
     u64_t blab;
     localCopy_vpsl = (void**)malloc(sizeof(void*) * (*env)->GetArrayLength(env, vpsl));
     for( localCount = 0; localCount < (*env)->GetArrayLength(env, vpsl); ++localCount ) {
       blab.i = local_vpsl[localCount];
       localCopy_vpsl[localCount] = blab.p;
       }
   } else
     localCopy_vpsl = (void**)local_vpsl;
   cfgAlgFree((cfgHandle_t)pcfg.p, alg, localCopy_vpsl);
   (*env)->ReleaseLongArrayElements(env, vpsl, local_vpsl, 0);
   if( sizeof(jlong) != sizeof(void*) ) {
     jsize localCount;
     u64_t blub;
     for( localCount = 0; localCount < (*env)->GetArrayLength(env, vpsl); ++localCount ) {
       blub.i = 0; blub.p = localCopy_vpsl[localCount];
       (*env)->SetLongArrayRegion(env, vpsl, localCount, 1, &blub.i);
     }
     free(localCopy_vpsl);
   }
}

JNIEXPORT jboolean JNICALL Java_com_gams_api_cfgm_DefFileName(JNIEnv *env, jobject obj, jstring id, jobjectArray defFileName)
{
   int rc_cfgDefFileName;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   char *local_id;
   jstring local_defFileName;
   char buffer_defFileName[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_id = (char *)(*env)->GetStringUTFChars(env, id, NULL);
   buffer_defFileName[0] = '\0';
   rc_cfgDefFileName = cfgDefFileName((cfgHandle_t)pcfg.p, local_id, buffer_defFileName);
   (*env)->ReleaseStringUTFChars(env, id, local_id);
   local_defFileName = (*env)->NewStringUTF(env, buffer_defFileName);
   (*env)->SetObjectArrayElement(env, defFileName, 0, local_defFileName);
   return rc_cfgDefFileName;
}

JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_ModelTypeName(JNIEnv *env, jobject obj, jint proc, jobjectArray sst_result)
{
   char *rc_cfgModelTypeName;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jstring local_sst;
   char buffer_sst[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return NULL;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   buffer_sst[0] = '\0';
   rc_cfgModelTypeName = cfgModelTypeName((cfgHandle_t)pcfg.p, proc, buffer_sst);
   local_sst = (*env)->NewStringUTF(env, buffer_sst);
   (*env)->SetObjectArrayElement(env, sst_result, 0, local_sst);
   return (*env)->NewStringUTF(env, rc_cfgModelTypeName);
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_ModelTypeNumber(JNIEnv *env, jobject obj, jstring id)
{
   int rc_cfgModelTypeNumber;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   char *local_id;
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   local_id = (char *)(*env)->GetStringUTFChars(env, id, NULL);
   rc_cfgModelTypeNumber = cfgModelTypeNumber((cfgHandle_t)pcfg.p, local_id);
   (*env)->ReleaseStringUTFChars(env, id, local_id);
   return rc_cfgModelTypeNumber;
}

JNIEXPORT jint JNICALL Java_com_gams_api_cfgm_NumMsg(JNIEnv *env, jobject obj)
{
   int rc_cfgNumMsg;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return 0;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   rc_cfgNumMsg = cfgNumMsg((cfgHandle_t)pcfg.p);
   return rc_cfgNumMsg;
}

JNIEXPORT jstring JNICALL Java_com_gams_api_cfgm_GetMsg(JNIEnv *env, jobject obj, jobjectArray sst_result)
{
   char *rc_cfgGetMsg;
   jfieldID fid;
   u64_t pcfg;
   jclass cls = (*env)->GetObjectClass(env, obj);
   jstring local_sst;
   char buffer_sst[256];
   fid = (*env)->GetFieldID(env, cls, "cfgPtr", "J");
   if (fid == NULL) return NULL;
   pcfg.i = (*env)->GetLongField(env, obj, fid);
   buffer_sst[0] = '\0';
   rc_cfgGetMsg = cfgGetMsg((cfgHandle_t)pcfg.p, buffer_sst);
   local_sst = (*env)->NewStringUTF(env, buffer_sst);
   (*env)->SetObjectArrayElement(env, sst_result, 0, local_sst);
   return (*env)->NewStringUTF(env, rc_cfgGetMsg);
}
